{"version":3,"file":"button.js","sources":["../icons/animated/spinner.svg?raw","../elements/button/index.ts"],"sourcesContent":["export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><style>.spinner_aj0A{transform-origin:center;animation:spinner_KYSC .75s infinite linear}@keyframes spinner_KYSC{100%{transform:rotate(360deg)}}</style><path d=\\\"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z\\\" class=\\\"spinner_aj0A\\\" fill=\\\"currentColor\\\"/></svg>\"","import { DefineOnce } from '../../util'\nimport { token } from '../typo/style.css'\nimport {\n\taccentButton,\n\tbuttonStyle,\n\tdisabledButton,\n\tghostButton,\n\ticonWrapperStyle,\n\tsecondaryButton,\n} from './style.css'\nimport spinnerIcon from '../../icons/animated/spinner.svg?raw'\n\nconst TYPE_CLASS_MAP = {\n\taccent: accentButton,\n\tsecondary: secondaryButton,\n\tghost: ghostButton,\n}\n\nclass ShadeButton extends HTMLElement {\n\tstatic observedAttributes = ['disabled', 'type', 'loading', 'icon']\n\tstatic defaultType = 'primary'\n\n\tprivate typeClass: string | null = null\n\tprivate iconWrapper = document.createElement('span')\n\n\tconstructor() {\n\t\tsuper()\n\t}\n\n\tconnectedCallback() {\n\t\tthis.classList.add(buttonStyle, token)\n\t\tthis.initializeIcon()\n\t\tthis.setInitialAttributes()\n\t}\n\n\tinitializeIcon() {\n\t\tthis.drawIcon()\n\t\tthis.insertBefore(this.iconWrapper, this.firstChild)\n\n\t\tthis.iconWrapper.classList.add(iconWrapperStyle)\n\t}\n\n\tasync drawIcon() {\n\t\tconst icon = await this.getIcon()\n\t\tif (!icon) return\n\n\t\tthis.iconWrapper.innerHTML = icon\n\t}\n\n\tasync getIcon() {\n\t\tconst isLoading = this.getAttribute('loading') !== null\n\n\t\tif (isLoading) {\n\t\t\treturn spinnerIcon\n\t\t}\n\n\t\tconst iconSrc = this.getAttribute('icon')\n\n\t\tif (!iconSrc) {\n\t\t\treturn\n\t\t}\n\n\t\tconst icon = await (await fetch(iconSrc)).text()\n\t\treturn icon\n\t}\n\n\tsetInitialAttributes() {\n\t\tconst type = this.getAttribute('type') || ShadeButton.defaultType\n\n\t\tthis.setTypeClass(type)\n\n\t\tconst disabled = this.getAttribute('disabled') !== null\n\t\tconst isLoading = this.getAttribute('loading') !== null\n\n\t\tthis.setDisability(disabled, isLoading)\n\t}\n\n\tattributeChangedCallback(name: string, oldValue: string, newValue: string) {\n\t\tif (name === 'disabled') {\n\t\t\tconst isLoading = this.getAttribute('loading') !== null\n\t\t\tthis.setDisability(newValue !== null, isLoading)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'loading') {\n\t\t\tconst disabled = this.getAttribute('disabled') !== null\n\t\t\tthis.setDisability(disabled, newValue !== null)\n\t\t\tthis.drawIcon()\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'type') {\n\t\t\tthis.setTypeClass(newValue)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'icon') {\n\t\t\tthis.drawIcon()\n\n\t\t\treturn\n\t\t}\n\t}\n\n\tsetTypeClass(type: string | null) {\n\t\tif (!type) return\n\n\t\tif (this.typeClass) {\n\t\t\tthis.classList.remove(this.typeClass)\n\t\t}\n\n\t\tconst newTypeClass = TYPE_CLASS_MAP[type]\n\t\tif (!newTypeClass) return\n\n\t\tthis.classList.add(newTypeClass)\n\t\tthis.typeClass = newTypeClass\n\t}\n\n\tsetDisability(disabled: boolean, isLoading: boolean) {\n\t\tif (disabled || isLoading) {\n\t\t\tthis.classList.add(disabledButton)\n\t\t\tthis.setAttribute('aria-disabled', 'true')\n\t\t\tthis.setAttribute('tabindex', '-1')\n\t\t} else {\n\t\t\tthis.classList.remove(disabledButton)\n\t\t\tthis.removeAttribute('aria-disabled')\n\t\t\tthis.setAttribute('tabindex', '0')\n\t\t}\n\t}\n}\n\nDefineOnce.define('sh-button', ShadeButton)\n"],"names":["spinnerIcon","TYPE_CLASS_MAP","accentButton","secondaryButton","ghostButton","_ShadeButton","__publicField","buttonStyle","token","iconWrapperStyle","icon","iconSrc","type","disabled","isLoading","name","oldValue","newValue","newTypeClass","disabledButton","ShadeButton","DefineOnce"],"mappings":";;;;;;;AAAA,MAAeA,IAAA,0cCYTC,IAAiB;AAAA,EACtB,QAAQC;AAAA,EACR,WAAWC;AAAA,EACX,OAAOC;AACR,GAEMC,IAAN,MAAMA,UAAoB,YAAY;AAAA,EAOrC,cAAc;AACP;AAJC,IAAAC,EAAA,mBAA2B;AAC3B,IAAAA,EAAA,qBAAc,SAAS,cAAc,MAAM;AAAA,EAInD;AAAA,EAEA,oBAAoB;AACd,SAAA,UAAU,IAAIC,GAAaC,CAAK,GACrC,KAAK,eAAe,GACpB,KAAK,qBAAqB;AAAA,EAC3B;AAAA,EAEA,iBAAiB;AAChB,SAAK,SAAS,GACd,KAAK,aAAa,KAAK,aAAa,KAAK,UAAU,GAE9C,KAAA,YAAY,UAAU,IAAIC,CAAgB;AAAA,EAChD;AAAA,EAEA,MAAM,WAAW;AACV,UAAAC,IAAO,MAAM,KAAK;AACxB,IAAKA,MAEL,KAAK,YAAY,YAAYA;AAAA,EAC9B;AAAA,EAEA,MAAM,UAAU;AAGf,QAFkB,KAAK,aAAa,SAAS,MAAM;AAG3C,aAAAV;AAGF,UAAAW,IAAU,KAAK,aAAa,MAAM;AAExC,WAAKA,IAIQ,OAAO,MAAM,MAAMA,CAAO,GAAG,SAHzC;AAAA,EAKF;AAAA,EAEA,uBAAuB;AACtB,UAAMC,IAAO,KAAK,aAAa,MAAM,KAAKP,EAAY;AAEtD,SAAK,aAAaO,CAAI;AAEtB,UAAMC,IAAW,KAAK,aAAa,UAAU,MAAM,MAC7CC,IAAY,KAAK,aAAa,SAAS,MAAM;AAE9C,SAAA,cAAcD,GAAUC,CAAS;AAAA,EACvC;AAAA,EAEA,yBAAyBC,GAAcC,GAAkBC,GAAkB;AAC1E,QAAIF,MAAS,YAAY;AACxB,YAAMD,IAAY,KAAK,aAAa,SAAS,MAAM;AAC9C,WAAA,cAAcG,MAAa,MAAMH,CAAS;AAE/C;AAAA,IACD;AAEA,QAAIC,MAAS,WAAW;AACvB,YAAMF,IAAW,KAAK,aAAa,UAAU,MAAM;AAC9C,WAAA,cAAcA,GAAUI,MAAa,IAAI,GAC9C,KAAK,SAAS;AAEd;AAAA,IACD;AAEA,QAAIF,MAAS,QAAQ;AACpB,WAAK,aAAaE,CAAQ;AAE1B;AAAA,IACD;AAEA,QAAIF,MAAS,QAAQ;AACpB,WAAK,SAAS;AAEd;AAAA,IACD;AAAA,EACD;AAAA,EAEA,aAAaH,GAAqB;AACjC,QAAI,CAACA;AAAM;AAEX,IAAI,KAAK,aACH,KAAA,UAAU,OAAO,KAAK,SAAS;AAG/B,UAAAM,IAAejB,EAAeW,CAAI;AACxC,IAAKM,MAEA,KAAA,UAAU,IAAIA,CAAY,GAC/B,KAAK,YAAYA;AAAA,EAClB;AAAA,EAEA,cAAcL,GAAmBC,GAAoB;AACpD,IAAID,KAAYC,KACV,KAAA,UAAU,IAAIK,CAAc,GAC5B,KAAA,aAAa,iBAAiB,MAAM,GACpC,KAAA,aAAa,YAAY,IAAI,MAE7B,KAAA,UAAU,OAAOA,CAAc,GACpC,KAAK,gBAAgB,eAAe,GAC/B,KAAA,aAAa,YAAY,GAAG;AAAA,EAEnC;AACD;AAhHCb,EADKD,GACE,sBAAqB,CAAC,YAAY,QAAQ,WAAW,MAAM,IAClEC,EAFKD,GAEE,eAAc;AAFtB,IAAMe,IAANf;AAmHAgB,EAAW,OAAO,aAAaD,CAAW;"}