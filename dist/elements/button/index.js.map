{"version":3,"file":"index.js","sources":["../../../icons/animated/spinner.svg?raw","../../../elements/button/index.ts"],"sourcesContent":["export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n<style>.spinner_aj0A{transform-origin:center;animation:spinner_KYSC .75s infinite linear}@keyframes spinner_KYSC{100%{transform:rotate(360deg)}}</style>\\n<path d=\\\"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z\\\" class=\\\"spinner_aj0A\\\" fill=\\\"currentColor\\\"/></svg>\"","import Spinner from '../../icons/animated/spinner.svg?raw'\nimport { DefineOnce } from '../../util'\nimport { token } from '../typo/style.css'\nimport {\n\taccentButton,\n\tbuttonStyle,\n\tdisabledButton,\n\tghostButton,\n\tloadingIcon,\n\tsecondaryButton,\n} from './style.css'\n\nconst TYPE_CLASS_MAP: Record<string, string> = {\n\taccent: accentButton,\n\tsecondary: secondaryButton,\n\tghost: ghostButton,\n}\n\nclass ShadeButton extends HTMLElement {\n\tstatic observedAttributes = ['disabled', 'type', 'icon', 'loading']\n\tstatic defaultType = 'primary'\n\n\tprivate typeClass: string | null = null\n\tprivate loadingIcon = document.createElement('div')\n\n\tconstructor() {\n\t\tsuper()\n\t\tthis.loadingIcon.classList.add(loadingIcon)\n\t\tthis.loadingIcon.innerHTML = Spinner\n\t}\n\n\tconnectedCallback() {\n\t\tthis.setAttribute('aria-atomic', 'true')\n\t\tthis.classList.add(buttonStyle, token)\n\t\tthis.insertAdjacentElement('afterbegin', this.loadingIcon)\n\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsetInitialAttributes() {\n\t\tconst type = this.getAttribute('type') || ShadeButton.defaultType\n\n\t\tthis.setTypeClass(type)\n\n\t\tconst disabled = this.getAttribute('disabled') !== null\n\t\tconst isLoading = this.getAttribute('loading') !== null\n\n\t\tthis.setDisability(disabled, isLoading)\n\t}\n\n\tattributeChangedCallback(name: string, oldValue: string, newValue: string) {\n\t\tif (name === 'disabled') {\n\t\t\tconst isLoading = this.getAttribute('loading') !== null\n\t\t\tthis.setDisability(newValue !== null, isLoading)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'type') {\n\t\t\tthis.setTypeClass(newValue)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'loading') {\n\t\t\tthis.setLoading(newValue !== null)\n\t\t}\n\t}\n\n\tsetTypeClass(type: string | null) {\n\t\tif (!type) return\n\n\t\tif (this.typeClass) {\n\t\t\tthis.classList.remove(this.typeClass)\n\t\t}\n\n\t\tconst newTypeClass = TYPE_CLASS_MAP[type]\n\t\tif (!newTypeClass) return\n\n\t\tthis.classList.add(newTypeClass)\n\t\tthis.typeClass = newTypeClass\n\t}\n\n\tsetDisability(disabled: boolean, isLoading: boolean) {\n\t\tconst isChildOfAnchor = this.parentElement instanceof HTMLAnchorElement\n\t\tconst isBlocked = disabled || isLoading\n\n\t\tconsole.log(isChildOfAnchor)\n\n\t\tconst tabindex = isChildOfAnchor || isBlocked ? '-1' : '0'\n\n\t\tif (isBlocked) {\n\t\t\tthis.classList.add(disabledButton)\n\t\t\tthis.setAttribute('aria-disabled', 'true')\n\t\t} else {\n\t\t\tthis.classList.remove(disabledButton)\n\t\t\tthis.removeAttribute('aria-disabled')\n\t\t}\n\n\t\tthis.setAttribute('tabindex', tabindex)\n\t}\n\n\tsetLoading(isLoading: boolean) {\n\t\tif (isLoading) {\n\t\t\tthis.setAttribute('aria-live', 'polite')\n\t\t\tthis.setAttribute('aria-busy', 'true')\n\t\t} else {\n\t\t\tthis.removeAttribute('aria-live')\n\t\t\tthis.removeAttribute('aria-busy')\n\t\t}\n\t}\n}\n\nconst NAME = 'sh-button'\nDefineOnce.define('sh-button', ShadeButton)\nexport default NAME\n\nexport interface ShadeButtonProps {\n\ttype?: 'accent' | 'secondary' | 'ghost'\n\tdisabled?: boolean\n\tloading?: boolean\n\ticon?: string\n\tchildren?: any\n\tsize?: 'default' | 'big' | 'bigger'\n}\n"],"names":["Spinner","TYPE_CLASS_MAP","accentButton","secondaryButton","ghostButton","_ShadeButton","loadingIcon","buttonStyle","token","type","disabled","isLoading","name","oldValue","newValue","newTypeClass","isChildOfAnchor","isBlocked","tabindex","disabledButton","ShadeButton","NAME","DefineOnce"],"mappings":";;;AAAA,MAAeA,IAAA;AAAA;AAAA;;ACYf,MAAMC,IAAyC;AAAA,EAC9C,QAAQC;AAAA,EACR,WAAWC;AAAA,EACX,OAAOC;AACR,GAEMC,IAAN,MAAMA,UAAoB,YAAY;AAAA,EAOrC,cAAc;AACP,aAJP,KAAQ,YAA2B,MAC3B,KAAA,cAAc,SAAS,cAAc,KAAK,GAI5C,KAAA,YAAY,UAAU,IAAIC,CAAW,GAC1C,KAAK,YAAY,YAAYN;AAAA,EAC9B;AAAA,EAEA,oBAAoB;AACd,SAAA,aAAa,eAAe,MAAM,GAClC,KAAA,UAAU,IAAIO,GAAaC,CAAK,GAChC,KAAA,sBAAsB,cAAc,KAAK,WAAW,GAEzD,KAAK,qBAAqB;AAAA,EAC3B;AAAA,EAEA,uBAAuB;AACtB,UAAMC,IAAO,KAAK,aAAa,MAAM,KAAKJ,EAAY;AAEtD,SAAK,aAAaI,CAAI;AAEtB,UAAMC,IAAW,KAAK,aAAa,UAAU,MAAM,MAC7CC,IAAY,KAAK,aAAa,SAAS,MAAM;AAE9C,SAAA,cAAcD,GAAUC,CAAS;AAAA,EACvC;AAAA,EAEA,yBAAyBC,GAAcC,GAAkBC,GAAkB;AAC1E,QAAIF,MAAS,YAAY;AACxB,YAAMD,IAAY,KAAK,aAAa,SAAS,MAAM;AAC9C,WAAA,cAAcG,MAAa,MAAMH,CAAS;AAE/C;AAAA,IACD;AAEA,QAAIC,MAAS,QAAQ;AACpB,WAAK,aAAaE,CAAQ;AAE1B;AAAA,IACD;AAEA,IAAIF,MAAS,aACP,KAAA,WAAWE,MAAa,IAAI;AAAA,EAEnC;AAAA,EAEA,aAAaL,GAAqB;AACjC,QAAI,CAACA;AAAM;AAEX,IAAI,KAAK,aACH,KAAA,UAAU,OAAO,KAAK,SAAS;AAG/B,UAAAM,IAAed,EAAeQ,CAAI;AACxC,IAAKM,MAEA,KAAA,UAAU,IAAIA,CAAY,GAC/B,KAAK,YAAYA;AAAA,EAClB;AAAA,EAEA,cAAcL,GAAmBC,GAAoB;AAC9C,UAAAK,IAAkB,KAAK,yBAAyB,mBAChDC,IAAYP,KAAYC;AAE9B,YAAQ,IAAIK,CAAe;AAErB,UAAAE,IAAWF,KAAmBC,IAAY,OAAO;AAEvD,IAAIA,KACE,KAAA,UAAU,IAAIE,CAAc,GAC5B,KAAA,aAAa,iBAAiB,MAAM,MAEpC,KAAA,UAAU,OAAOA,CAAc,GACpC,KAAK,gBAAgB,eAAe,IAGhC,KAAA,aAAa,YAAYD,CAAQ;AAAA,EACvC;AAAA,EAEA,WAAWP,GAAoB;AAC9B,IAAIA,KACE,KAAA,aAAa,aAAa,QAAQ,GAClC,KAAA,aAAa,aAAa,MAAM,MAErC,KAAK,gBAAgB,WAAW,GAChC,KAAK,gBAAgB,WAAW;AAAA,EAElC;AACD;AA5FCN,EAAO,qBAAqB,CAAC,YAAY,QAAQ,QAAQ,SAAS,GAClEA,EAAO,cAAc;AAFtB,IAAMe,IAANf;AA+FA,MAAMgB,IAAO;AACbC,EAAW,OAAO,aAAaF,CAAW;"}