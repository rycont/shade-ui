{"version":3,"file":"index.js","sources":["../../../icons/animated/spinner.svg?raw","../../../elements/button/index.ts"],"sourcesContent":["export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n<style>.spinner_aj0A{transform-origin:center;animation:spinner_KYSC .75s infinite linear}@keyframes spinner_KYSC{100%{transform:rotate(360deg)}}</style>\\n<path d=\\\"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z\\\" class=\\\"spinner_aj0A\\\" fill=\\\"currentColor\\\"/></svg>\"","import Spinner from '../../icons/animated/spinner.svg?raw'\nimport { DefineOnce } from '../../util'\nimport { token } from '../typo/style.css'\nimport {\n\taccentButton,\n\tbuttonStyle,\n\tdisabledButton,\n\tghostButton,\n\tloadingIcon,\n\tsecondaryButton,\n} from './style.css'\n\nconst TYPE_CLASS_MAP: Record<string, string> = {\n\taccent: accentButton,\n\tsecondary: secondaryButton,\n\tghost: ghostButton,\n}\n\n// TODO: Reimplement ShadeButton component\n\nclass ShadeButton extends HTMLElement {\n\tstatic observedAttributes = ['disabled', 'type', 'icon', 'loading']\n\tstatic defaultType = 'primary'\n\n\tprivate typeClass: string | null = null\n\tprivate loadingIcon = document.createElement('div')\n\n\tconstructor() {\n\t\tsuper()\n\t\tthis.loadingIcon.classList.add(loadingIcon)\n\t\tthis.loadingIcon.innerHTML = Spinner\n\t}\n\n\tconnectedCallback() {\n\t\tthis.addEventListener('click', () => {\n\t\t\tif (this.getAttribute('type') === 'submit') {\n\t\t\t\tthis.submit()\n\t\t\t}\n\t\t})\n\n\t\tthis.addEventListener('keydown', (event) => {\n\t\t\tconst isEnter = event.key === 'Enter'\n\t\t\tconst isSpace = event.key === ' '\n\n\t\t\tif (!isEnter && !isSpace) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (this.getAttribute('type') === 'submit') {\n\t\t\t\tthis.submit()\n\t\t\t} else {\n\t\t\t\tthis.click()\n\t\t\t}\n\t\t})\n\n\t\tthis.setAttribute('aria-atomic', 'true')\n\t\tthis.classList.add(buttonStyle, token)\n\t\tthis.insertAdjacentElement('afterbegin', this.loadingIcon)\n\n\t\tthis.setInitialAttributes()\n\t}\n\n\tsubmit() {\n\t\tconst virtualSubmitButton = document.createElement('input')\n\t\tvirtualSubmitButton.type = 'submit'\n\t\tvirtualSubmitButton.style.display = 'none'\n\n\t\tthis.parentElement?.appendChild(virtualSubmitButton)\n\t\tvirtualSubmitButton.click()\n\t\tthis.parentElement?.removeChild(virtualSubmitButton)\n\t}\n\n\tsetInitialAttributes() {\n\t\tconst type = this.getAttribute('type') || ShadeButton.defaultType\n\n\t\tthis.setTypeClass(type)\n\n\t\tconst disabled = this.getAttribute('disabled') !== null\n\t\tconst isLoading = this.getAttribute('loading') !== null\n\n\t\tthis.setDisability(disabled, isLoading)\n\t}\n\n\tattributeChangedCallback(\n\t\tname: string,\n\t\t_oldValue: string,\n\t\tnewValue: string,\n\t) {\n\t\tif (name === 'disabled') {\n\t\t\tconst isLoading = this.getAttribute('loading') !== null\n\t\t\tthis.setDisability(newValue !== null, isLoading)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'type') {\n\t\t\tthis.setTypeClass(newValue)\n\n\t\t\treturn\n\t\t}\n\n\t\tif (name === 'loading') {\n\t\t\tthis.setLoading(newValue !== null)\n\n\t\t\tconst isDisabled = this.getAttribute('disabled') !== null\n\t\t\tthis.setDisability(isDisabled, newValue !== null)\n\n\t\t\treturn\n\t\t}\n\t}\n\n\tsetTypeClass(type: string | null) {\n\t\tif (!type) return\n\n\t\tif (this.typeClass) {\n\t\t\tthis.classList.remove(this.typeClass)\n\t\t}\n\n\t\tconst newTypeClass = TYPE_CLASS_MAP[type]\n\t\tif (!newTypeClass) return\n\n\t\tthis.classList.add(newTypeClass)\n\t\tthis.typeClass = newTypeClass\n\t}\n\n\tsetDisability(disabled: boolean, isLoading: boolean) {\n\t\tconst isChildOfAnchor = this.parentElement instanceof HTMLAnchorElement\n\t\tconst isBlocked = disabled || isLoading\n\n\t\tconst tabindex = isChildOfAnchor || isBlocked ? '-1' : '0'\n\n\t\tif (isBlocked) {\n\t\t\tthis.classList.add(disabledButton)\n\t\t\tthis.setAttribute('aria-disabled', 'true')\n\t\t} else {\n\t\t\tthis.classList.remove(disabledButton)\n\t\t\tthis.removeAttribute('aria-disabled')\n\t\t}\n\n\t\tthis.setAttribute('tabindex', tabindex)\n\t}\n\n\tsetLoading(isLoading: boolean) {\n\t\tif (isLoading) {\n\t\t\tthis.setAttribute('aria-live', 'polite')\n\t\t\tthis.setAttribute('aria-busy', 'true')\n\t\t\tthis.loadingIcon.style.setProperty('display', 'block')\n\t\t} else {\n\t\t\tthis.removeAttribute('aria-live')\n\t\t\tthis.removeAttribute('aria-busy')\n\t\t\tthis.loadingIcon.style.setProperty('display', 'none')\n\t\t}\n\t}\n\n\tset textContent(value: string) {\n\t\tconst textNodes = Array.from(this.childNodes).filter(\n\t\t\t(node) => node instanceof Text && node.textContent?.trim().length,\n\t\t)\n\n\t\tfor (const node of textNodes) {\n\t\t\tthis.removeChild(node)\n\t\t}\n\n\t\tthis.appendChild(document.createTextNode(value))\n\t}\n}\n\nconst NAME = 'sh-button'\nDefineOnce.define('sh-button', ShadeButton)\nexport default NAME\n\nexport interface ShadeButtonProps {\n\ttype?: 'accent' | 'secondary' | 'ghost'\n\tdisabled?: boolean\n\tloading?: boolean\n\ticon?: string\n\tchildren?: any\n\tsize?: 'default' | 'big' | 'bigger'\n}\n"],"names":["Spinner","TYPE_CLASS_MAP","accentButton","secondaryButton","ghostButton","_ShadeButton","loadingIcon","event","isEnter","isSpace","buttonStyle","token","virtualSubmitButton","_a","_b","type","disabled","isLoading","name","_oldValue","newValue","isDisabled","newTypeClass","isChildOfAnchor","isBlocked","tabindex","disabledButton","value","textNodes","node","ShadeButton","NAME","DefineOnce"],"mappings":"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"}